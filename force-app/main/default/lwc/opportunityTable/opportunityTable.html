<template>
    <lightning-card title="Opportunities" icon-name="standard:opportunity">
        <template if:true={opportunities}>
            <lightning-datatable
                key-field="id"
                data={pagedOpportunities}
                columns={columns}
                hide-checkbox-column="true"
                onrowaction={handleRowAction}>
            </lightning-datatable>
            <div class="slds-m-top_small">
                <span>Total Records {recordCount}</span>
                <lightning-button-group class="slds-m-left_small">
                    <lightning-button 
                        label="Previous" 
                        onclick={handlePrevious} 
                        disabled={isFirstPage}>
                    </lightning-button>
                    <lightning-button 
                        label="Next" 
                        onclick={handleNext} 
                        disabled={isLastPage}>
                    </lightning-button>
                </lightning-button-group>
                <span class="slds-m-left_small">Page {currentPage} of {totalPages}</span>
            </div>
        </template>
        <template if:true={error}>
            <div class="slds-text-color_error">{error}</div>
        </template>
        <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading..." size="medium"></lightning-spinner>
        </template>
    </lightning-card>
</template>